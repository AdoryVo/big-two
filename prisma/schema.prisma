generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Game {
  id         String   @id @default(uuid())
  combo      String[] @default([])
  lowestCard String?

  players       Player[] @relation("Players")
  currentPlayer Player?  @relation("CurrentTurn")
  passedPlayers Int[]    @default([])
  lastPlaymaker Int?
  backupNext    Int?

  createdAt DateTime @default(now())
}

model Player {
  id    String @id @default(uuid())
  index Int    @default(-1)

  name     String   @db.VarChar(255)
  hand     String[] @default([])
  finished Boolean  @default(false)
  points   Int      @default(0)

  game   Game   @relation("Players", fields: [gameId], references: [id])
  gameId String

  currentIn   Game?   @relation("CurrentTurn", fields: [currentInId], references: [id])
  currentInId String? @unique
}
